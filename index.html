<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Prueba POS</title>
</head>

<body>

<h2>PRUEBA POS – FERRETERÍA</h2>

<h3>Registrar producto</h3>
<input id="codigo" placeholder="Código de barras">
<input id="nombre" placeholder="Nombre">
<button onclick="guardar()">Guardar</button>

<h3>Vender</h3>
<input id="scan" placeholder="Escanear para vender">

<script>
let inventario = JSON.parse(localStorage.getItem("inv")) || {};

function guardar() {
  const c = document.getElementById("codigo").value.trim();
  const n = document.getElementById("nombre").value.trim();

  if (!c || !n) {
    alert("Faltan datos");
    return;
  }

  inventario[c] = { nombre: n };
  localStorage.setItem("inv", JSON.stringify(inventario));

  alert("Producto guardado");
  codigo.value = "";
  nombre.value = "";
}

document.getElementById("scan").addEventListener("keydown", function(e){
  if (e.key === "Enter") {
    vender(this.value.trim());
    this.value = "";
  }
});

function vender(c) {
  if (!inventario[c]) {
    alert("Producto NO encontrado");
    return;
  }

  let precio = prompt(
    "Producto: " + inventario[c].nombre + 
    "\nIngrese precio de venta:"
  );

  alert("Se venderá en Q" + precio);
}
</script>

</body>
</html>